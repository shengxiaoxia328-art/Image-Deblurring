# 任务b完成总结报告

## 任务概述
实现使用LU分解和QR分解两种方法进行图像去模糊的算法。

## 实现的方法

### 1. LU分解方法 (`deblur_lu`)
- 对 `A_ℓ` 和 `A_r^T` 进行LU分解
- 分两步求解：先求解 `A_ℓ Y = B`，再求解 `X A_r = Y`
- 使用 `scipy.linalg.lu_factor` 和 `lu_solve`

### 2. QR分解方法 (`deblur_qr`)
- 对 `A_ℓ` 和 `A_r^T` 进行QR分解
- 分两步求解：先求解 `A_ℓ Y = B`，再求解 `X A_r = Y`
- 使用 `scipy.linalg.qr` 和 `solve_triangular`
- 对于接近奇异的矩阵，使用最小二乘作为后备方案

## 实验结果

### 测试配置
- **图像1**: 512×512 汽车图像
- **图像2**: 1024×1024 书籍图像
- **配置1**: 使用PDF中指定的模糊核（j=0, k=12 和 j=1, k=36）
- **配置2**: 使用对称带状模糊核（10个带）

### 主要结果

#### Config2（对称带状模糊核）- 结果优秀

| 图像 | 尺寸 | 方法 | CPU时间(s) | 相对误差 | PSNR(dB) |
|------|------|------|------------|----------|----------|
| 512_car | 512×512 | LU | 0.0585 | 1.31×10⁻⁸ | ∞ |
| 512_car | 512×512 | QR | 0.0257 | 1.33×10⁻⁸ | ∞ |
| 1024_books | 1024×1024 | LU | 1.8555 | 1.20×10⁻⁷ | 193.50 |
| 1024_books | 1024×1024 | QR | 0.1427 | 1.29×10⁻⁷ | 192.88 |

#### Config1（PDF指定模糊核）- 数值不稳定
Config1的模糊核接近奇异，导致数值不稳定，去模糊结果较差。

## 主要观察

### 1. CPU时间比较
- **QR分解通常更快**：对于512×512图像，QR比LU快约2-2.7倍
- **对于大图像优势更明显**：对于1024×1024图像，QR比LU快约13-14倍
- **原因**：QR分解的矩阵运算更高效，特别是对于大矩阵

### 2. 精度比较
- **Config2（良好条件）**：
  - LU和QR的相对误差非常接近（~10⁻⁸）
  - 两种方法都能很好地恢复原始图像
  - LU略优于QR（误差稍小）
  
- **Config1（病态条件）**：
  - 两种方法都失败，相对误差极大
  - QR略优于LU，但都不实用

### 3. PSNR比较
- **Config2**：两种方法都达到了极高的PSNR（>190 dB或∞）
- **Config1**：PSNR为负值，表明重建失败

## 结论

1. **QR分解在速度上具有明显优势**，特别是对于大图像
2. **对于良好条件的模糊核**，LU和QR都能提供优秀的去模糊结果
3. **对于病态模糊核**，两种方法都难以获得好的结果，需要正则化或其他稳定化技术
4. **QR分解在数值稳定性上略优于LU**，特别是在处理接近奇异的矩阵时

## 建议

1. 在实际应用中，**优先考虑QR分解**，因为它在速度和稳定性方面都有优势
2. 对于病态模糊核，应该：
   - 使用正则化技术（如Tikhonov正则化）
   - 考虑最小二乘方法（任务e）
   - 检查模糊核的条件数，必要时进行调整

## 生成的文件

- `results/`: 包含所有去模糊结果图像和比较图
- `blurred_images/`: 包含模糊图像和模糊核
- 所有结果图像已保存为PNG格式，便于查看和报告

